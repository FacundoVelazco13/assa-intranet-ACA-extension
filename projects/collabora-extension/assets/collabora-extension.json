{
  "$id": "collabora-extension",
  "$version": "1.0.0",
  "$vendor": "Facundo Velazco",
  "$name": "collabora-extension",
  "$description": "Collabora Online plugin",
  "$license": "MIT",

  "routes": [
    {
      "id": "collabora.route",
      "path": "collabora-online",
      "auth": ["app.auth"],
      "children": [
        {
          "id": "collabora.route.edit",
          "path": ":action/:nodeId",
          "component": "collabora.edit.component"
        }
      ]
    }
  ],

  "actions": [
    {
      "id": "collabora.plugin.actions.edit",
      "type": "COLLABORA_EDIT",
      "payload": "$(context.selection.first)"
    },
    {
      "id": "collabora.plugin.actions.view",
      "type": "COLLABORA_VIEW",
      "payload": "$(context.selection.first)"
    }
  ],

  "rules": [
    {
      "id": "collabora.rules.canEditWithCollaboraOnline",
      "type": "collabora.canEditWithCollaboraOnline"
    },
    {
      "id": "collabora.rules.canViewWithCollaboraOnline",
      "type": "collabora.canViewWithCollaboraOnline"
    }
  ],

  "features": {
    "icons": [
      {
        "id": "adf:edit-collabora-online",
        "value": "./assets/images/collabora-online-logo.svg"
      }
    ],
    "toolbar": [
      {
        "id": "app.toolbar.more",
        "children": [
          {
            "id": "collabora.plugin.viewer.view",
            "type": "button",
            "order": 89,
            "icon": "adf:edit-collabora-online",
            "title": "Ver con Collabora Online",
            "actions": {
              "click": "collabora.plugin.actions.view"
            },
            "rules": {
              "visible": "collabora.canViewWithCollaboraOnline"
            }
          },
          {
            "id": "collabora.plugin.viewer.edit",
            "type": "button",
            "order": 89,
            "icon": "adf:edit-collabora-online",
            "title": "COLLABORA.EDIT",
            "actions": {
              "click": "collabora.plugin.actions.edit"
            },
            "rules": {
              "visible": "collabora.canEditWithCollaboraOnline"
            }
          }
        ]
      }
    ],
    "contextMenu": [
      {
        "id": "collabora.plugin.viewer.view",
        "type": "button",
        "order": 449,
        "icon": "adf:edit-collabora-online",
        "title": "Ver con Collabora Online",
        "actions": {
          "click": "collabora.plugin.actions.view"
        },
        "rules": {
          "visible": "collabora.canViewWithCollaboraOnline"
        }
      },
      {
        "id": "collabora.plugin.viewer.edit",
        "type": "button",
        "order": 449,
        "icon": "adf:edit-collabora-online",
        "title": "COLLABORA.EDIT",
        "actions": {
          "click": "collabora.plugin.actions.edit"
        },
        "rules": {
          "visible": "collabora.canEditWithCollaboraOnline"
        }
      }
    ],
    "viewer": {
      "toolbarActions": [
        {
          "id": "app.viewer.toolbar.more",
          "children": [
            {
              "id": "aos.viewer.openWith.office",
              "order": 2
            },
            {
              "id": "collabora.plugin.viewer.view",
              "type": "button",
              "order": 1,
              "icon": "adf:edit-collabora-online",
              "title": "Ver con Collabora Online",
              "actions": {
                "click": "collabora.plugin.actions.view"
              },
              "rules": {
                "visible": "collabora.canViewWithCollaboraOnline"
              }
            },
            {
              "id": "collabora.plugin.viewer.edit",
              "type": "button",
              "order": 1,
              "icon": "adf:edit-collabora-online",
              "title": "COLLABORA.EDIT",
              "actions": {
                "click": "collabora.plugin.actions.edit"
              },
              "rules": {
                "visible": "collabora.canEditWithCollaboraOnline"
              }
            }
          ]
        }
      ]
    }
  }
}
